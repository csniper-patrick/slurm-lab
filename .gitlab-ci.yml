variables:
  GIT_SUBMODULE_STRATEGY: recursive

cache: []

stages:
  - init
  - test
  - build
  - deploy

include:
  - local: 'gitlab-ci.d/test.yml'
  - local: 'gitlab-ci.d/init.yml'

build:
  stage: build
  trigger:
    include:
      - artifact: gitlab-ci.d/container-build.yml
        job: generate-pipeline
    strategy: depend

tag:
  stage: deploy
  trigger:
    include:
      - artifact: gitlab-ci.d/container-tag.yml
        job: generate-pipeline
    strategy: depend